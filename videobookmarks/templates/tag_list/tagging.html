{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Tagging for "{{ tag_list_name }}"{% endblock %}</h1>
  <p id="demo"></p>

{% endblock %}

{% block content %}
<!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: '{{ yt_video_id }}',
          playerVars: {
            'playsinline': 1
          },
          events: {
            'onReady': onPlayerReady,
          }
        });
      }
      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }
      // Update the count down every 1 second
      var x = setInterval(function() {

        // Get current time stamp
        var timestamp = player.getCurrentTime();
        // Output the result in an element with id="demo"
        document.getElementById("demo").innerHTML = timestamp
        document.getElementById("timestamp").value = timestamp
        }, 250);
    </script>
  <form method="post">
    <label for="tag">Tag</label>
    <input name="tag" id="tag"
      value="{{ request.form['tag'] }}" required>
    <input type="submit" value="add tag">
    <input type="hidden" id="timestamp" name="timestamp" value="hello">
  </form>

{% endblock %}